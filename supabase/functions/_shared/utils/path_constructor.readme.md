# How Path Constructor and File Manager Generate a Unique Deterministic File Tree

## File Naming Primitives

**Variables Used:**

*   `{model_slug}`: The generating model's slug (e.g., `gpt-4-turbo`).
*   `{n}`: The `attemptCount`, an integer (starting at 0) that increments only when the *same model* generates *multiple distinct contributions for the same input*.
*   `{stage_slug}`: The slug of the current stage (e.g., `thesis`, `antithesis`).
*   `{contribution_type}`: The specific type of artifact being created (e.g., `thesis`, `antithesis`, `pairwise_synthesis_chunk`, `synthesis`).
*   `{source_model_slugs}`: An alphabetically sorted, underscore-separated list of model slugs from the source contributions.
*   `{source_anchor_type}`: The `contribution_type` of the anchor document for a derivative work (e.g., `thesis`).
*   `{source_anchor_model_slug}`: The `model_slug` of the anchor document's author.
*   `{paired_model_slug}`: The `model_slug` of the non-anchor document in a synthesis pair.
*   `{source_attempt_count}`: The `attemptCount` (`{n}`) of the source document being operated on.

---

## File Structure for Path Construction and File Name Generation

{repo_root}/  (Root of the user's GitHub repository)
└── {project_name_slug}/
    ├── project_readme.md      (Optional high-level project description, goals, defined by user or initial setup, *Generated at project finish, not start, not yet implemented*)
    ├── Master_Plan.md         (High level checklist of sprints/epics with milestone level granularity that shows the entire project start to finish. Each completed segment is checked off as it's completed. The Master_Plan.md is fed back into the system to output each low-level milestone-to-milestone highly granular checklist for each session.)
    ├── {user_prompt}.md (the initial prompt submitted by the user to begin the project generated by createProject, whether provided as a file or text string, *Generated at project start, implemented*)
    ├── project_settings.json (The json object includes keys for the dialectic_domain row, dialectic_process_template, dialectic_stage_transitions, dialectic_stages, dialectic_process_associations, domain_specific_prompt_overlays, and system_prompt used for the project where the key is the table and the value is an object containing the values of the row, *Generated on project finish, not project start, not yet implemented*)
    ├── {export_project_file}.zip (a zip file of the entire project for the user to download generated by exportProject)
    ├── general_resource (all optional)
    │    ├── `{deployment_context}` (where/how the solution will be implemented), 
    │    ├── `{domain_standards}` (domain-specific quality standards and best practices), 
    │    ├── `{success_criteria}` (measurable outcomes that define success), 
    │    ├── `{constraint_boundaries}` (non-negotiable requirements and limitations), 
    │    ├── `{stakeholder_considerations}` (who will be affected and how),
    │    ├── `{reference_documents}` (user-provided reference materials and existing assets), 
    │    └── `{compliance_requirements}` (regulatory, legal, or organizational compliance mandates)    
    ├── Pending/          (System-managed folder populated with the low-level detailed milestone-to-milestone output of the Paralysis stage)
    │   └── ...                     (When the user begins their work, they move the first file they're going to work on from Pending to Current)
    ├── Current/          (User-managed folder for the milestone-to-milestone level file they are actively working on for this project)
    │   └── ...                     (This is the file the user is currently working on, drawn from Pending)
    ├── Complete/         (User-managed folder for the files they have already completed for this project)       
    │   └── ...                     (When the user finishes all the items in the Current file, they move it to Complete, and move the next Pending file into Current. When all the milestone level plans are completed, the user checks them off the Master_Plan.md and feeds the Master_Plan back into a new Session at the Thesis stage to generate the next set of low-level detailed milestone-to-milestone plans.) 
    └── session_{session_id_short}/  (Each distinct run of the dialectic process)
        └── iteration_{N}/        (N being the iteration number, e.g., "iteration_1")
            ├── 1_thesis/
            │   ├── raw_responses
            │   │   └──{model_slug}_{n}_{contribution_type}_raw.json
            │   ├── seed_prompt.md  (The complete prompt sent to the model for completion for this stage, including the stage prompt template, stage overlays, and user's input)
            │   ├── {model_slug}_{n}_{contribution_type}.md (Contains YAML frontmatter + AI response, appends a count so a single model can provide multiple contributions)
            │   ├── ... (other models' thesis outputs)
            │   ├── user_feedback_thesis.md   (User's feedback on this stage)
            │   └── documents/                      (Optional refined documents, e.g., PRDs from each model)
            │       └── (generated from .json object located at Database['dialectic_stages']['row']['expected_output_artifacts'])
            ├── 2_antithesis/
            │   ├── raw_responses
            │   │   └── {model_slug}_critiquing_({source_model_slug}'s_{source_contribution_type}_{source_attempt_count})_{n}_antithesis_raw.json
            │   ├── seed_prompt.md  (The complete prompt sent to the model for completion for this stage, including the stage prompt template, stage overlays, and user's input)
            │   ├── {model_slug}_critiquing_({source_model_slug}'s_{source_contribution_type}_{source_attempt_count})_{n}_antithesis.md
            │   ├── ...
            │   ├── user_feedback_antithesis.md
            │   └── documents/                    (Optional refined documents, e.g., PRDs from each model)
            │       └── (generated from .json object located at Database['dialectic_stages']['row']['expected_output_artifacts'])                
            ├── 3_synthesis/
            │   └── raw_responses/
            │   │   └── {model_slug}_{n}_final_synthesis_raw.json
            │   ├── _work/   (Storage for intermediate, machine-generated artifacts that are not final outputs)
            |   │   └── raw_responses/
            |   │   │   ├── {model_slug}_synthesizing_{source_anchor_model_slug}_with_{paired_model_slug}_on_{source_anchor_type}_{n}_pairwise_synthesis_chunk_raw.json
            |   │   │   ├── {model_slug}_reducing_{source_anchor_type}_by_{source_anchor_model_slug}_{n}_reduced_synthesis_raw.json
            |   │   │   └── {model_slug}_compressing_{source_model_slugs}_rag_summary_raw.json
            │   │   ├── {model_slug}_synthesizing_{source_anchor_model_slug}_with_{paired_model_slug}_on_{source_anchor_type}_{n}_pairwise_synthesis_chunk.md
            │   │   ├── {model_slug}_reducing_{source_anchor_type}_by_{source_anchor_model_slug}_{n}_reduced_synthesis.md
            │   │   └── {model_slug}_compressing_{source_model_slugs}_rag_summary.txt
            │   ├── seed_prompt.md  (The complete prompt sent to the model for completion for this stage, including the stage prompt template, stage overlays, and user's input)
            │   ├── {model_slug}_{n}_synthesis.md
            │   ├── ...
            │   ├── user_feedback_synthesis.md
            │   └── documents/                      (Optional refined documents, e.g., PRDs from each model)
            │       └── (generated from .json object located at Database['dialectic_stages']['row']['expected_output_artifacts'])
            ├── 4_parenthesis/
            │   ├── raw_responses
            │   │   └──{model_slug}_{n}_{contribution_type}_raw.json
            │   ├── seed_prompt.md  (The complete prompt sent to the model for completion for this stage, including the stage prompt template, stage overlays, and user's input)
            │   ├── {model_slug}_{n}_{contribution_type}.md
            │   ├── ...
            │   ├── user_feedback_parenthesis.md
            │   └── documents/                      (Optional refined documents, e.g., PRDs from each model)
            │       └── (generated from .json object located at Database['dialectic_stages']['row']['expected_output_artifacts'])
            └── 5_paralysis/
                ├── raw_responses
                │   └──{model_slug}_{n}_{contribution_type}_raw.json
                ├── seed_prompt.md  (The complete prompt sent to the model for completion for this stage, including the stage prompt template, stage overlays, and user's input)
                ├── {model_slug}_{n}_{contribution_type}.md
                ├── ...
                └── documents/                      (Optional refined documents, e.g., PRDs from each model)
                    └── (generated from .json object located at Database['dialectic_stages']['row']['expected_output_artifacts'])


## Stage-by-Stage Breakdown

### **Simple Stages (Thesis, Parenthesis, Paralysis)**

These stages take the entire prior context and produce a primary output.

*   **Main Contribution (`.md`)**
    *   **Primitive:** `{model_slug}_{n}_{contribution_type}.md`
    *   **Example:** `gpt-4-turbo_0_thesis.md`
    *   **Rationale:** `contribution_type` is more explicit than `stage_slug`. `{n}` is now clearly defined for multiple outputs from the same model for the same prompt.

*   **Raw Response (`.json`)**
    *   **Primitive:** `{model_slug}_{n}_{contribution_type}_raw.json`
    *   **Example:** `gpt-4-turbo_0_thesis_raw.json`
    *   **Rationale:** Follows the main contribution for consistency.

### **Antithesis Stage (Critique per Source)**

This stage generates one output for each input from the previous stage.

*   **Main Contribution (`.md`)**
    *   **Primitive:** `{model_slug}_critiquing_({source_model_slug}'s_{source_contribution_type}_{source_attempt_count})_{n}_{contribution_type}.md`
    *   **Example:** `gpt-4-turbo_critiquing_(claude-3-opus's_thesis_0)_0_antithesis.md`
    *   **Rationale:** Uniqueness is guaranteed by including the source document's model, type, and its original attempt count. This creates a human-readable genealogical link, ensuring that critiques of different source documents from the same author have distinct filenames.

*   **Raw Response (`.json`)**
    *   **Primitive:** `{model_slug}_critiquing_({source_model_slug}'s_{source_contribution_type}_{source_attempt_count})_{n}_{contribution_type}_raw.json`
    *   **Example:** `gpt-4-turbo_critiquing_(claude-3-opus's_thesis_0)_0_antithesis_raw.json`

### **Synthesis Stage (Multi-step Map/Reduce)**

This stage has intermediate artifacts that must be uniquely named.

*   **Step 1: Pairwise Synthesis Chunk (`pairwise_synthesis_chunk`)**
    *   **Primitive:** `{model_slug}_synthesizing_{source_anchor_model_slug}_with_{paired_model_slug}_on_{source_anchor_type}_{n}_{contribution_type}.md`
    *   **Example:** `gpt-4-turbo_synthesizing_gpt-4-turbo_with_claude-3-opus_on_thesis_0_pairwise_synthesis_chunk.md`
    *   **Rationale:** The filename is explicitly descriptive of the pairwise synthesis action. It includes the generating model, the anchor document's model (`source_anchor_model_slug`), the model of the document it's being paired with (`paired_model_slug`), and the type of the anchor document (`source_anchor_type`). This structure guarantees uniqueness for each distinct pair and makes the origin of the artifact unambiguous.

*   **Step 2: Reduced Synthesis (`reduced_synthesis`)**
    *   **Primitive:** `{model_slug}_reducing_{source_anchor_type}_by_{source_anchor_model_slug}_{n}_{contribution_type}.md`
    *   **Example:** `gpt-4-turbo_reducing_thesis_by_claude-3-opus_0_reduced_synthesis.md`
    *   **Rationale:** This clearly identifies the file is a reduction based on a specific anchor document, ensuring uniqueness and clarity about its origin.

*   **Step 3: Final Synthesis (`synthesis`)**
    *   **Primitive:** `{model_slug}_{n}_{contribution_type}.md`
    *   **Example:** `gpt-4-turbo_0_final_synthesis.md`
    *   **Rationale:** This is a final, primary contribution for the stage, so it can follow the simple stage pattern. The `contribution_type` distinguishes it from intermediate files.

### **Utility Artifacts**

*   **RAG Context Summary (`rag_context_summary`)**
    *   **Primitive:** `{model_slug}_compressing_{source_model_slugs}_rag_summary.txt`
    *   **Example:** `gpt-4-turbo_compressing_claude-3-opus_and_gpt-4-turbo_rag_summary.txt`
    *   **Rationale:** Describes the action (compressing) and the sources being compressed. Placed in the `_work` directory as it is a machine-only artifact.
